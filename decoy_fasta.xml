<tool id="decoy_fasta" name="Create Decoy Database" version="0.1.0">
  <description>Creates a decoy search database by adding reverse
  sequences to an existing database.</description>

  <requirements>
    <requirement type="package">transproteomic_pipeline</requirement>
  </requirements>

  <command>
    decoyFASTA ${input} ${output} ${include_original} -t${frequency} ${tag}
    #if $freq_type.advanced == "yes"
    -t${frequency} ${tag}
    #for $extra_tag in $extra_tags
    -t${extra_tag.frequency} ${extra_tag.tag} 
    #end for
    #end if
    #else
    -t1 ${freq_type.tag}
    #end else
  </command>

  <inputs>
    <param format="fasta" name="input" type="data" label="FASTA Input" />
    <param name="include_original" type="boolean" truevalue="" falsevalue="-no_orig" label="Include original entries in output database" checked="True" />
    <conditional name="freq_type">
      <param name="advanced" type="select" label="Specify advanced decoy frequency options?">
        <option value="no">No, just create database with one reversed sequence for every input sequence</option>
        <option value="yes">Yes, I want to specify multiple prefixes and specific frequencies</option>
      </param>
      <when value="no">
        <param name="tag" type="text" value="decoy_" label="Decoy Prefix"/>
      </when>
      <when value="yes">
        <param name="tag" type="text" value="decoy_" label="Decoy Prefix"/>
        <param name="frequency" type="integer" value="1" label="Decoy Frequency" />
        <repeat name="extra_tags" title="Additional Decoy Tags">
          <param name="tag" type="text" value="decoy_" label="Decoy Prefix"/>
          <param name="frequency" type="integer" value="1" label="Decoy Frequency" />
        </repeat>
      </when>
    </conditional>
  </inputs>

  <outputs>
    <data format="fasta" name="output" />
  </outputs>

  <help>
**What it does**

Given an input database, this tool will produce another database with
reversed sequences to use as decoys for FDR estimation in protein
search identification. This tool employs the decoyFASTA program from
the Transproteomic Pipeline.

------

**Citation**

For the underlying tool, please cite `Proteomics. 2010 Mar;10(6):1150-9. A guided tour of the Trans-Proteomic Pipeline. Deutsch EW, Mendoza L, Shteynberg D, Farrah T, Lam H, Tasman N, Sun Z, Nilsson E, Pratt B, Prazen B, Eng JK, Martin DB, Nesvizhskii AI, Aebersold R. PMID 20101611`

If you use this tool in Galaxy, please cite Chilton J, et al. https://bitbucket.org/galaxyp/galaxyp-toolshed-decoyfasta
  </help>
</tool>
