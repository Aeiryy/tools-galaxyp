<tool id="dbbuilder" version="0.1.0" name="Protein Database Downloader">
  <description>
  </description>
  <requirements>
    <requirement type="binary">wget</requirement>    
  </requirements>  
  <stdio>
    <exit_code range="1:"  level="fatal"   description="Error computing FDR" />
  </stdio>
  <command>
    #if $source.from == "uniprot"
    #set $url = "http://www.uniprot.org/uniprot/?query=taxonomy%3a%22" + str($source.taxon) + "%22+keyword%3a1185&amp;force=yes&amp;format=fasta" + str($source.include_isoform)
    #elif $source.from == "cRAP"
    #set $url = "ftp://ftp.thegpm.org/fasta/cRAP/crap.fasta"
    #end if
    wget -nv '$url' -O '${output_database}'
  </command>
  <inputs>
    <conditional name="source">
      <param name="from" type="select" label="Download from">
        <option value="uniprot">UniProtKB</option>
        <option value="cRAP">cRAP (contaminants)</option>
      </param>
      <when value="uniprot">
        <param name="taxon" type="select" format="text" >
          <label>Taxonomy</label>
          <options from_file="uniprot_taxons.loc">
            <column name="name" index="0" />
            <column name="value" index="1" />
          </options>
        </param>
        <param name="include_isoform" type="boolean" truevalue="&amp;include=yes" falsevalue="" label="Include isoform data" />
      </when>
    </conditional>
  </inputs>
  <outputs>
    <data format="fasta" name="output_database" label="Protein Database" />
  </outputs>
  <help>
**Output**

A FASTA file containing the specified protein sequences.

  </help>
</tool>

